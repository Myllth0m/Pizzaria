@model PizzaCriacaoDto

<div class="container mt-5">
    <form asp-controller="Pizza" asp-action="Cadastrar" method="post" enctype="multipart/form-data">
        <h2>Cadastro de pizza</h2>
        <div class="text-center">
            <label for="imageFile">
                <img id="img" style="width: 150px; height: 200px" />
            </label>
        </div>
        <div class="mb-1">
            <label class="form-label mt-3">Capa:</label>
            <input class="form-control shadow-none" type="file" id="imageFile" name="foto" />
        </div>
        <div class="mb-1">
            <label class="form-label mt-3">Sabor:</label>
            <input class="form-control shadow-none" type="text" asp-for="Sabor"/>
            <span class="text-danger" asp-validation-for="Sabor"></span>
        </div>
        <div class="mb-1">
            <label class="form-label mt-3">Descrição:</label>
            <input class="form-control shadow-none" type="text" asp-for="Descricao" />
            <span class="text-danger" asp-validation-for="Descricao"></span>
        </div>
        <div class="mb-1">
            <label class="form-label mt-3">Valor:</label>
            <input class="form-control shadow-none" type="number" min="1" step="any" asp-for="Valor" />
            <span class="text-danger" asp-validation-for="Valor"></span>
        </div>
        <div class="btn-box d-flex mt-3">
            <button class="btn btn-success w-50 mx-1" type="submit"><i class="bi bi-plus-circle"></i>Cadastrar!!</button>
            <a class="btn btn-info w-50" role="button" asp-controller="Pizza" asp-action="Index"><i class="bi bi-arrow-left-circle"></i>Voltar</a>
        </div>
    </form>
</div>

<script>
    const inputFile = document.querySelector('#imageFile')

    inputFile.addEventListener('change', function (e) {
        const inputTarget = e.target
        const file = inputTarget.files[0]

        if (file) {
            const reader = new FileReader()
            
            reader.addEventListener('load', function (e) {
                const readerTarget = e.target
                const img = document.querySelector('#img')
                
                img.src = readerTarget.result

                const figcaption = document.querySelector('#figcaption')

                figcaption.innerHTML = file.name
            })

            reader.readAsDataURL(file)
        }
    })
</script>